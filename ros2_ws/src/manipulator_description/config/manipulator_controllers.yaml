# ROS2 Control Configuration for Manipulator
# Individual position controllers for each joint

controller_manager:
  ros__parameters:
    update_rate: 100  # Hz

    # Joint State Broadcaster (publishes /joint_states)
    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    # ============================================================
    # BASE ASSEMBLY CONTROLLERS
    # ============================================================

    # X-axis railway controller
    base_main_frame_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # ============================================================
    # SELECTOR ASSEMBLY CONTROLLERS
    # ============================================================

    # Z-axis vertical controller
    main_frame_selector_frame_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # Left container jaw controller (right jaw mimics this)
    selector_left_container_jaw_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # Gripper Y-axis controller
    selector_frame_gripper_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # ============================================================
    # PICKER ASSEMBLY CONTROLLERS
    # ============================================================

    # Picker Z-axis vertical controller
    selector_frame_picker_frame_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # Picker Y-axis rail controller
    picker_frame_picker_rail_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # Picker X-axis base controller
    picker_rail_picker_base_joint_controller:
      type: forward_command_controller/ForwardCommandController

    # Picker X-axis jaw extension controller
    picker_base_picker_jaw_joint_controller:
      type: forward_command_controller/ForwardCommandController

# ============================================================
# CONTROLLER CONFIGURATIONS
# ============================================================

# Joint State Broadcaster
joint_state_broadcaster:
  ros__parameters:
    joints:
      - base_main_frame_joint
      - main_frame_selector_frame_joint
      - selector_left_container_jaw_joint
      - selector_right_container_jaw_joint  # Mimic joint, state only
      - selector_frame_gripper_joint
      - selector_frame_picker_frame_joint
      - picker_frame_picker_rail_joint
      - picker_rail_picker_base_joint
      - picker_base_picker_jaw_joint

# Base Assembly Controllers
base_main_frame_joint_controller:
  ros__parameters:
    joints:
      - base_main_frame_joint
    interface_name: position

main_frame_selector_frame_joint_controller:
  ros__parameters:
    joints:
      - main_frame_selector_frame_joint
    interface_name: position

# Selector Assembly Controllers
selector_left_container_jaw_joint_controller:
  ros__parameters:
    joints:
      - selector_left_container_jaw_joint
    interface_name: position

selector_frame_gripper_joint_controller:
  ros__parameters:
    joints:
      - selector_frame_gripper_joint
    interface_name: position

# Picker Assembly Controllers
selector_frame_picker_frame_joint_controller:
  ros__parameters:
    joints:
      - selector_frame_picker_frame_joint
    interface_name: position

picker_frame_picker_rail_joint_controller:
  ros__parameters:
    joints:
      - picker_frame_picker_rail_joint
    interface_name: position

picker_rail_picker_base_joint_controller:
  ros__parameters:
    joints:
      - picker_rail_picker_base_joint
    interface_name: position

picker_base_picker_jaw_joint_controller:
  ros__parameters:
    joints:
      - picker_base_picker_jaw_joint
    interface_name: position

# ============================================================
# INITIAL POSITIONS (adjustable)
# ============================================================
# Note: Initial positions are set in ros2_control.xacro hardware interface
# These values are for reference only